{"openapi":"3.0.1","info":{"title":"PRODUCER API","description":"Producer API for OPEN DATA Aplication","contact":{"name":"Andoni Salcedo Navarro","url":"ansalna@alumni.uv.es","email":"ansalna@alumni.uv.es"},"license":{"name":"Apache 2.0","url":"https://www.apache.org/licenses/LICENSE-2.0"},"version":"v1"},"servers":[{"url":"http://localhost","description":"Production"}],"paths":{"/api/v1/producer/{producerId}":{"put":{"tags":["producer-controller"],"summary":"Update Producer","description":"Modificación de la información del productor (PF2). Se podrán actualizar los campos especificados en la solicitud de registro Requerirá autenticación y que su estado sea activo.","operationId":"updateProducer","parameters":[{"name":"producerId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"x-auth-user-id","in":"header","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/ProducerDTO"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"object"}}}}}}},"/api/v1/producer/files/{producerId}/{fileId}":{"put":{"tags":["producer-controller"],"summary":"Update File","description":"Modificar la información de un fichero de datos del productor. Se podrán actualizar el título, descripción y palabras clave. Requerirá autenticación y que su  estado sea activo.","operationId":"updateFile","parameters":[{"name":"producerId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"x-auth-user-id","in":"header","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"fileId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/NewFileDTO"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"object"}}}}}},"delete":{"tags":["producer-controller"],"summary":"Delete File","description":"Eliminar un fichero de datos del productor. Requerirá autenticación y que su estado sea activo.","operationId":"deleteFile","parameters":[{"name":"producerId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"x-auth-user-id","in":"header","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"fileId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"object"}}}}}}},"/api/v1/producer":{"post":{"tags":["producer-controller"],"summary":"Register Producer","description":"Solicitud de registro de un nuevo productor. Se indicará NIF/CIF, nombre completo o razón social, tipo (persona física o jurídica), e-mail y contraseña. El usuario se creará con estado pendiente de aprobación (por un validador) y sin cuota anual asignada. No se requerirá autenticación.","operationId":"registerProducer","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/NewProducerDTO"}}},"required":true},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"object"}}}}}}},"/api/v1/producer/files/{producerId}":{"get":{"tags":["producer-controller"],"summary":"Get Files","description":" Consultar el listado de ficheros de datos del productor. Requerirá autenticación y que su estado sea activo.","operationId":"getFiles","parameters":[{"name":"producerId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"x-auth-user-id","in":"header","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"object"}}}}}},"post":{"tags":["producer-controller"],"summary":"Upload File","description":"Subir un fichero de datos. Junto con el fichero de texto, se indicará el título, descripción y palabras clave. Para emular la carga de ficheros grandes, se indicará de manera manual un tamaño de fichero (en MB) que no tiene porqué coincidir con  el tamaño real del fichero. Se comprobará el formato y que no se exceda la cuota anual. El fichero se creará en estado pendiente de revisión (por un validador). Requerirá autenticación y que su estado sea activo.","operationId":"uploadFile","parameters":[{"name":"producerId","in":"path","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"x-auth-user-id","in":"header","required":true,"schema":{"type":"integer","format":"int64"}},{"name":"title","in":"query","required":true,"schema":{"type":"string"}},{"name":"description","in":"query","required":true,"schema":{"type":"string"}},{"name":"keyWords","in":"query","required":true,"schema":{"type":"array","items":{"type":"string"}}},{"name":"size","in":"query","required":true,"schema":{"type":"integer","format":"int32"}}],"requestBody":{"content":{"application/json":{"schema":{"required":["fileData"],"type":"object","properties":{"fileData":{"type":"string","format":"binary"}}}}}},"responses":{"200":{"description":"OK","content":{"*/*":{"schema":{"type":"object"}}}}}}}},"components":{"schemas":{"ProducerDTO":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"state":{"type":"boolean"},"quota":{"type":"number","format":"double"},"nif":{"type":"string"},"name":{"type":"string"},"email":{"type":"string"},"password":{"type":"string"},"type":{"type":"string"}}},"NewFileDTO":{"type":"object","properties":{"title":{"type":"string"},"description":{"type":"string"},"keyWords":{"type":"array","items":{"type":"string"}},"size":{"type":"integer","format":"int32"}}},"NewProducerDTO":{"type":"object","properties":{"nif":{"type":"string"},"name":{"type":"string"},"email":{"type":"string"},"password":{"type":"string"},"type":{"type":"string"}}}}}}